---
import Presentation from "../../components/Presentation.astro";
import Divider from "../../components/ui/Divider.astro";
import ListItem from "../../components/ui/ListItem.astro";
import Layout from "../../layouts/Layout.astro";
import { Code } from "astro-expressive-code/components";
import { Code as AstroCode } from "astro:components";
import { Image } from "astro:assets";

//#region CodeSnippets
const Figure1 = `
// Trivia data
let questions = [
  "What planet is known as the Red Planet?",
  "How many bits are in a byte?",
  "What language are we programming in?"
];

let answers = [
  "mars",
  "8",
  "javascript"
];
`;

const Figure2 = `
// Processing pattern: count correct answers
let score = 0;
let i = 0;

while (i < questions.length) {
  let response = prompt(questions[i]).toLowerCase();

  if (response == answers[i]) {
    console.log("Correct!");
    score++;
  } else {
    console.log("Incorrect.");
  }

  i++;
}

console.log("Final score:", score);
`;

const Task1 = `
console.log("--- Demo 1: Trivia Game ---");

// Trivia questions and answers
let questions = [
  "What planet is known as the Red Planet?",
  "How many bits are in a byte?",
  "What language are we programming in?"
];

let answers = [
  "mars",
  "8",
  "javascript"
];

// Score tracker
let score = 0;
let i = 0;

// Ask each question
while (i < questions.length) {
  let response = prompt(questions[i]).toLowerCase();

  if (response == answers[i]) {
    console.log("Correct!");
    score++;
  } else {
    console.log("Incorrect. The correct answer was: " + answers[i]);
  }

  i++;
}

// Final result
console.log("You answered " + score + " out of " + questions.length + " correctly.");

prompt("Press enter to continue...");
`;

const Task2 = `
console.log("--- Demo 2: Trivia Game Summary ---");

// Example score data
let scores = [2, 3, 1, 3, 2];

// Calculate class average score
let total = 0;
let i = 0;

while (i < scores.length) {
  total += scores[i];
  i++;
}

let average = total / scores.length;

console.log("Average trivia score:", average);

if (average == scores.length) {
  console.log("Perfect average! Everyone nailed it!");
} else if (average >= 2) {
  console.log("Nice job overall!");
} else {
  console.log("Looks like we need more practice!");
}

prompt("Press enter to continue...");
`;

const SampleOutput = `
--- Demo 1: Trivia Game ---
What planet is known as the Red Planet? mars
Correct!
How many bits are in a byte? 8
Correct!
What language are we programming in? javascript
Correct!
You answered 3 out of 3 correctly.
Press enter to continue... [Enter]

--- Demo 2: Trivia Game Summary ---
Average trivia score: 2.2
Nice job overall!
Press enter to continue... [Enter]
`;
//#endregion
---

<Layout>
  <div class="container my-4">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-10">
        <a href="/js-programming/" class="btn btn-sm btn-outline-light mb-3">
          <i class="si-arrow-left"></i> Back
        </a>

        <h1>Activity 4.6 — Trivia Game</h1>
        <Divider variant="8" classes="mb-4" />

        <!-- Introduction -->
        <h2>Introduction</h2>

        <Presentation>
          <section>
            <h3>Activity 4.6</h3>
            <h4 class="text-skynest-theme">Building a Game with Arrays</h4>
          </section>

          <section>
            <h4>Topics</h4>
            <ul>
              <li>Using arrays to store game data</li>
              <li>Traversal to control game flow</li>
              <li>Tracking scores</li>
              <li>Processing results</li>
            </ul>
          </section>

          <section>
            <h4>Why Games?</h4>
            <p>
              Games use the same programming concepts as serious applications —
              they just present them in a more fun way.
            </p>
            <p class="fragment">
              In this activity, you’ll build a complete game using only tools
              you already know.
            </p>
          </section>

          <section>
            <h4>Parallel Arrays</h4>
            <p>
              This trivia game uses <span class="text-skynest-theme">parallel arrays</span>:
            </p>
            <ul>
              <li><code>questions[i]</code> holds a question</li>
              <li><code>answers[i]</code> holds the correct answer</li>
            </ul>
            <p class="fragment">
              Both arrays must stay the same length.
            </p>
          </section>

          <section>
            <h4>Demo: Trivia Loop</h4>
            <Code code={Figure2} lang="javascript" class="text-start" />
          </section>

          <section>
            <h4>What Makes This a Complete Program?</h4>
            <ul>
              <li>User input</li>
              <li>Stored data</li>
              <li>Decision-making</li>
              <li>Final output</li>
            </ul>
          </section>
        </Presentation>

        <section id="objectives">
          <h3>Objectives</h3>
          <ul>
            <ListItem>Store game data using arrays.</ListItem>
            <ListItem>Use traversal to control program flow.</ListItem>
            <ListItem>Track and process a game score.</ListItem>
            <ListItem>Build a complete, interactive program.</ListItem>
          </ul>
        </section>

        <Divider variant="8" classes="mb-4" />

        <section id="activity-tasks">
          <h2>Activity Tasks</h2>
          <ul>
            <ListItem variant="2">
              Create a new project named <span class="text-skynest-theme">trivia-game</span>.
            </ListItem>
            <ListItem variant="2">Complete each task individually.</ListItem>
          </ul>

          <!-- Task 1 -->
          <h3>
            <span class="text-skynest-theme">Task 1</span>: Build the Trivia Game
          </h3>
          <ul>
            <ListItem variant="2">Ask each trivia question using a loop.</ListItem>
            <ListItem variant="2">Compare user answers to the correct answers.</ListItem>
            <ListItem variant="2">Keep track of the player’s score.</ListItem>
          </ul>
          <Code
            code={Task1}
            frame="code"
            lang="javascript"
            title="Task 1 — Trivia Game"
          />

          <hr class="my-4" />

          <!-- Task 2 -->
          <h3>
            <span class="text-skynest-theme">Task 2</span>: Analyze Game Results
          </h3>
          <ul>
            <ListItem variant="2">Store multiple scores in an array.</ListItem>
            <ListItem variant="2">Calculate the average trivia score.</ListItem>
            <ListItem variant="2">Print a summary message.</ListItem>
          </ul>
          <Code
            code={Task2}
            frame="code"
            lang="javascript"
            title="Task 2 — Game Summary"
          />
        </section>

        <Divider variant="8" classes="my-4" />

        <section id="sample-output">
          <h2>Sample Output</h2>

          <Code
            code={SampleOutput}
            frame="terminal"
            lang="txt"
            showLineNumbers={false}
            title="Sample Output"
          />
        </section>

        <Divider variant="8" classes="my-4" />

        <section id="reflection">
          <h2>Reflection Questions</h2>

          <p>
            You may write your reflection answers as comments at the bottom of
            your code.
          </p>

          <ol>
            <li>How do arrays help organize game data?</li>
            <li>Why must the questions and answers arrays stay the same length?</li>
            <li>How is this program similar to a Create Performance Task?</li>
          </ol>
        </section>

        <Divider variant="8" classes="my-4" />

        <section id="submission">
          <h2>Submission</h2>

          <p>
            Submit your activity and reflection answers to the appropriate
            dropbox.
          </p>

          <h1 class="text-center mt-5 text-skynest-theme border border-primary">
            Activity Complete
          </h1>
        </section>
      </div>
    </div>
  </div>
</Layout>
